<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chat with History</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div id="layout">
  <div id="menu-bubble">
    <button id="toggle-history" onclick="toggleHistory()">📂</button>
    <div id="history" class="bubble">
      <label style="font-size: 14px;">选择模型：</label>
      <select id="model-select" style="width: 100%; margin-bottom: 10px;"></select>
      <button onclick="createNewChat()">+ 新对话</button>
      <button onclick="clearAllChats()">🗑 清空历史</button>
      <button onclick="exportCurrentChat()">📁 导出当前对话</button>
      <button onclick="toggleDarkMode()">🌓 夜间模式</button>
      <input type="text" id="search-box" placeholder="搜索消息..." oninput="searchMessages()" style="margin-top: 10px; width: 100%; padding: 5px; font-size: 14px;" />
      <div id="history-list"></div>
    </div>
  </div>
  <div id="main">
    <div id="chat" style="margin-top: 60px;"></div>
    <div id="input-container">
  <textarea id="user-input" rows="2" placeholder="输入你的问题..."></textarea>
  
</div>
    </div>
  </div>
</div>

<script>
function toggleHistory() {
  document.getElementById('history').classList.toggle('show');
}

// 自动关闭菜单气泡（点击外部）
document.addEventListener('click', function (e) {
  const history = document.getElementById('history');
  const toggle = document.getElementById('toggle-history');
  if (!history.contains(e.target) && !toggle.contains(e.target)) {
    history.classList.remove('show');
  }
});
</script>
<script>
document.getElementById('user-input').addEventListener('keydown', function (e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

</script>
<script src="script.js"></script>
</body>
</html>
